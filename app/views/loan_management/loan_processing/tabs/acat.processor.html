<!-- START Table List of CLIENT ACAT-->
<div ng-if="!vm.visibility.showClientACAT" class="row">
   <div class="col-lg-12">

      <br/>

      <md-toolbar class="md-table-toolbar md-default" ng-show="vm.filter.show">
         <div class="md-toolbar-tools">
            <div class="p-lg">
               <md-button class="md-icon-button">
                  <i class="fa fa-search"></i>
               </md-button>
            </div>
            <!-- Input Text -->
            <md-input-container flex>
               <input id="search-input" type="text" ng-model="vm.query.search" />
            </md-input-container>

            <div class="p-lg">

               <md-button class="md-icon-button" ng-click="vm.clearSearchText()">
                  <i class="fa fa-times"></i>
               </md-button>
            </div>

         </div>
      </md-toolbar>

      <md-toolbar class="md-table-toolbar md-default" ng-hide="vm.filter.show">
         <div class="md-toolbar-tools">
            <h2 class="md-title p-lg">Clients under ACAT Processor</h2>

            <div flex="" class="flex  p-lg"></div>
            <div class="p-lg">
               <button class="md-icon-button md-button md-ink-ripple " type="button" ng-click="vm.filter.show = true">
                  <i class="fa fa-filter"></i>
                  <div class="md-ripple-container"></div>
               </button>
            </div>

         </div>
      </md-toolbar>


      <md-table-container>
         <table md-table md-progress="vm.acatCollectionPromise" class="table-hover">
            <thead md-head class="text-gray-dark">
               <tr md-row>
                  <th md-column>
                     <span>No</span>
                  </th>
                  <th md-column>
                     <span>Full Name</span>
                  </th>
                  <th md-column>
                     <span>Gender</span>
                  </th>
                  <th md-column>
                     <span>DOB</span>
                  </th>
                  <th md-column>
                     <span>Civil Status</span>
                  </th>
                  <th md-column>
                     <span>Branch</span>
                  </th>
                  <th md-column>
                     <span>Created Date</span>
                  </th>
                  <th md-column>Action</th>
               </tr>

               <tbody md-body>
                  <tr md-row ng-repeat="acat in vm.acatCollection">

                     <td md-cell>{{vm.query.per_page* (vm.query.page - 1) + $index + 1}}</td>
                     <td md-cell>
                        {{ acat.client.first_name }} {{ acat.client.last_name }} {{acat.client.grandfather_name}}
                     </td>
                     <td md-cell>{{acat.client.gender}}</td>
                     <td md-cell>{{acat.client.date_of_birth | date}}</td>
                     <td md-cell>{{acat.client.civil_status}}</td>
                     <td md-cell>{{acat.branch.name}}</td>
                     <td md-cell>
                        <span am-time-ago="acat.date_created"></span>
                     </td>
                     <td md-cell>
                        <a ng-click="vm.onClientACATClick(acat,$event)">
                           <i class="fa fa-eye"></i>
                        </a>
                     </td>
                  </tr>
               </tbody>
         </table>
      </md-table-container>

      <md-table-pagination md-limit="vm.query.per_page" md-limit-options="vm.pageSizes" md-page="vm.query.page" md-total="{{vm.query.total_docs_count}}" md-page-select="vm.options.pageSelect" md-boundary-links="vm.options.boundaryLinks" md-on-paginate="vm.paginate"></md-table-pagination>

   </div>
</div>

<!-- START Client ACAT-->
<div ng-if="vm.visibility.showClientACAT" class="row">
   <div class="panel-heading">
      <div class="col-lg-12">

         <button ng-click="vm.visibility.showClientACAT = false" class="btn btn-labeled btn-default" type="button">
            <span class="btn-label"><i class="fa fa-arrow-left"></i>
            </span>Back
         </button>
         <div class="pull-right">
            <h5 class="inline">{{vm.acats.client.first_name}} {{vm.acats.client.last_name}}</h5>
            <span class="label label-green">{{vm.acats.status}}</span>
            <!--<span class="label label-inverse text-muted" am-time-ago="vm.acats.last_modified"></span>-->
         </div>
      </div>
   </div>

   <div ng-show="!vm.visibility.showCropACAT" class="panel-body">

      <md-toolbar class="md-table-toolbar md-default">
         <div class="md-toolbar-tools">
            <div flex="" class="flex"></div>
            <button class="md-icon-button md-button md-ink-ripple" type="button" ng-click="vm.addEditClientACAT(null)">
               <i class="fa fa-plus"></i>
               <div class="md-ripple-container"></div>
            </button>
         </div>
      </md-toolbar>
      <!-- CROP ACAT LIST-->
      <div class="table-responsive">
         <table class="table table-striped">
            <thead>
               <tr class="text-center">
                  <th class="text-center"></th>
                  <th class="text-center">Crop</th>
                  <th class="text-center hidden-xs ">Loan Product</th>
                  <th class="text-center ">Cropping Area</th>
                  <th class="text-center ">First Expense Month</th>
                  <th class="text-center  hidden-xs hidden-sm">Status</th>
                  <th class="text-center">Action</th>
               </tr>
            </thead>
            <tbody>
               <tr class="text-center" ng-repeat="cropACAT in vm.acats.ACATs">
                  <td>{{$index + 1}}</td>
                  <td>
                     <span>
                        <a ng-click="vm.addEditClientACAT(cropACAT)">
                           <strong>{{cropACAT.crop.name}}</strong>
                        </a>
                     </span>
                     <div class="text-muted">
                        <small>{{cropACAT.crop.category}}</small>
                     </div>
                  </td>
                  <td class="  hidden-xs hidden-sm">
                     <strong>{{vm.acats.loan_product.name}}</strong>
                     <br/>
                     <em class="text-muted">Max Loan Amount:
                        <small>{{vm.acats.loan_product.maximum_loan_amount | number}}</small>
                     </em>
                  </td>
                  <td class="text-center  ">
                     <strong>{{cropACAT.cropping_area_size}}</strong>
                  </td>
                  <td class="text-center ">
                     <strong>{{cropACAT.first_expense_month}}</strong>
                  </td>
                  <td class="hidden-xs hidden-sm ">
                     <strong>{{cropACAT.status}}</strong>
                     <br/>
                     <em class="text-muted">
                        <small class="label bg-gray">modified
                           <span am-time-ago="cropACAT.last_modified"></span>
                        </small>
                     </em>
                  </td>
                  <td class="hidden-xs hidden-sm ">
                     <a ng-click="vm.addEditClientACAT(cropACAT)">
                        <i class="fa fa-edit"></i>
                     </a>
                  </td>
               </tr>
            </tbody>
         </table>
      </div>

   </div>

   <div ng-show="vm.visibility.showCropACAT" class="panel-body">
      <br/>
      <div class="pull-right">
         <a class="btn btn-default btn-sm" ng-click="vm.visibility.showCropACAT = false">
            <i class="fa fa-arrow-left"></i> Back to Crop ACAT</a>
      </div>

      <div ng-include="'app/views/loan_management/loan_processing/crop.acat.processor.html'"></div>

   </div>

</div>
<!-- END Client ACAT-->



