<div ng-show="!vm.visibility.showCropACAT" class="panel-body">

   <!--Preliminary Information-->
   <div>
      <legend>1. Preliminary Information</legend>
      <fieldset>
         <div class="form-group clearfix">
            <label class="col-md-2 control-label">Loan Product</label>
            <div class="col-md-10 controls">
               <ui-select ng-model="vm.acats.loan_product" theme="bootstrap" title="Choose Loan Product">
                  <ui-select-match placeholder="Select loan product from the list...">
                     {{$select.selected.name}}
                  </ui-select-match>
                  <ui-select-choices repeat="loan_product in vm.loanProducts | filter: $select.search">
                     <span ng-bind-html="loan_product.name | highlight: $select.search"></span>
                  </ui-select-choices>
               </ui-select>
            </div>
         </div>
         <br>
         <div class="form-group clearfix">
            <label class="col-md-2 control-label">Type of Crops</label>
            <div class="col-md-10 controls">
               <ui-select multiple ng-model="vm.acats.crops" theme="bootstrap" title="Choose Crops">
                  <ui-select-match placeholder="Select crops from the list...">
                     {{$item.name}} - {{$item.category}}
                  </ui-select-match>
                  <ui-select-choices repeat="crop in vm.crops | filter: $select.search">
                     <span ng-bind-html="crop.name + ' - ' + crop.category | highlight: $select.search"></span>
                  </ui-select-choices>
               </ui-select>
            </div>
         </div>
         <br>
         <div class="form-group pull-right">
            <a class="btn btn-sm btn-success" ng-click="vm.saveAcat()"> <i class="fa fa-save"> </i> {{vm.isEditAcat ? 'Save': 'Update'}}</a>
         </div>

      </fieldset>
   </div>

   <div class="section-divider">
      <span class=" text-uppercase">CROP ACAT LIST</span>
   </div>

   <!-- CROP ACAT LIST-->
   <div class="table-responsive mr-sm">
      <table class="table table-condensed table-bordered">
         <thead class="bg-gray">
            <tr class="text-center">
               <th class="text-center"></th>
               <th class="text-center">Crop</th>
               <th class="text-center hidden-xs ">Loan Product</th>
               <th class="text-center ">Cropping Area</th>
               <th class="text-center ">First Expense Month</th>
               <th class="text-center  hidden-xs hidden-sm">Status</th>
               <th class="text-center">Action</th>
            </tr>
         </thead>
         <tbody>
            <tr class="text-center" ng-repeat="cropACAT in vm.acats.ACATs">
               <td>{{$index + 1}}</td>
               <td>
                  <span>
                     <a ng-click="vm.addEditClientACAT(cropACAT)">
                        <strong>{{cropACAT.crop.name}}</strong>
                     </a>
                  </span>
                  <div class="text-muted">
                     <small>{{cropACAT.crop.category}}</small>
                  </div>
               </td>
               <td class="  hidden-xs hidden-sm">
                  <strong>{{vm.acats.loan_product.name}}</strong>
                  <br/>
                  <em class="text-muted">Max Loan Amount:
                     <small>{{vm.acats.loan_product.maximum_loan_amount | number}}</small>
                  </em>
               </td>
               <td class="text-center  ">
                  <strong>{{cropACAT.cropping_area_size}}</strong>
               </td>
               <td class="text-center ">
                  <strong>{{cropACAT.first_expense_month}}</strong>
               </td>
               <td class="hidden-xs hidden-sm ">
                  <strong>{{cropACAT.status}}</strong>
                  <br/>
                  <em class="text-muted">
                     <small class="label bg-gray">modified
                        <span am-time-ago="cropACAT.last_modified"></span>
                     </small>
                  </em>
               </td>
               <td class="hidden-xs hidden-sm ">
                  <a ng-click="vm.addEditClientACAT(cropACAT)">
                     <i class="fa fa-edit"></i>
                  </a>
               </td>
            </tr>
         </tbody>
      </table>
   </div>

</div>

<div ng-show="vm.visibility.showCropACAT" class="panel-body">
   <br/>
   <div class="pull-right">
      <a class="btn btn-default btn-sm" ng-click="vm.visibility.showCropACAT = false">
         <i class="fa fa-arrow-left"></i> Back to Crop ACAT</a>
   </div>

   <div ng-include="'app/views/loan_management/loan_processing/tabs/acat.crop.processor.html'"></div>

</div>