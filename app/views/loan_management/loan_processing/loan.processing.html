<h3>Loan Processing
   <small>Manage clients, screenings,loan applications and acats.</small>
</h3>

<div class="panel">
   <uib-tabset justified="true">
      <uib-tab ng-click="vm.onTabSelected('CLIENT')" heading="Manage Clients">
         <div class="row" ng-show="!vm.visibility.showClientDetail">
            <div class="centerPageText">
               ...Nothing so far... wait for it... use tablet app for adding clients for now...
            </div>
         </div>
         <div class="row" ng-if="vm.visibility.showClientDetail">
            <clients></clients>
         </div>
      </uib-tab>
      <uib-tab ng-click="vm.onTabSelected('SCREENING')" heading="Screenings">
         <div class="row" ng-show="vm.visibility.showScreeningDetail">
            <form name="screeningForm">

               <div class="col-lg-12">
                  <a ng-click="vm.backToList('SCREENING')">
                     <i class="fa fa-arrow-left"></i> Back
                  </a>
                  <div class="pull-right">
                     <h5 class="inline">{{vm.client.client.first_name}} {{vm.client.client.last_name}}</h5>
                     <span class="label label-green">{{vm.client.status}}</span>
                     <span class="label label-warning" am-time-ago="vm.client.last_modified"></span>
                  </div>

               </div>

               <div ng-include="'app/views/loan_management/loan_processing/question.component.template.html'"></div>

            </form>
         </div>
         <!--LIST OF CLIENTS UNDER SCREENING-->
         <div class="row" ng-show="!vm.visibility.showScreeningDetail">
            <div class="col-lg-12">

               <md-toolbar class="md-table-toolbar md-default" ng-show="vm.filter.show">
                  <div class="md-toolbar-tools">
                     <md-button class="md-icon-button" ng-click="vm.searchScreening()">
                        <i class="fa fa-search"></i>
                     </md-button>

                     <!-- Input Text -->
                     <md-input-container flex>
                        <input id="search-input" type="text" ng-model="vm.query.search" />
                     </md-input-container>

                     <md-button class="md-icon-button" ng-click="vm.clearSearchText()">
                        <i class="fa fa-times"></i>
                     </md-button>
                  </div>
               </md-toolbar>

               <md-toolbar class="md-table-toolbar md-default" ng-hide="vm.filter.show">
                  <div class="md-toolbar-tools">
                     <h2 class="md-title">Clients under screening</h2>

                     <div flex="" class="flex"></div>
                     <button class="md-icon-button md-button md-ink-ripple" type="button" ng-click="vm.filter.show = true">
                        <i class="fa fa-filter"></i>
                        <div class="md-ripple-container"></div>
                     </button>
                  </div>
               </md-toolbar>


               <md-table-container>
                  <table md-table md-progress="vm.screeningPromise" class="table-hover">
                     <thead md-head class="text-gray-dark">
                        <tr md-row>
                           <th md-column>
                              <span>No</span>
                           </th>
                           <th md-column>
                              <span>Full Name</span>
                           </th>
                           <th md-column>
                              <span>Gender</span>
                           </th>
                           <th md-column>
                              <span>DOB</span>
                           </th>
                           <th md-column>
                              <span>Civil Status</span>
                           </th>
                           <th md-column>
                              <span>Status</span>
                           </th>
                           <th md-column>Action</th>
                        </tr>

                        <tbody md-body>
                           <tr md-row ng-repeat="screening in vm.screenings">

                              <td md-cell>{{vm.query.per_page* (vm.query.page - 1) + $index + 1}}</td>
                              <td md-cell>
                                 {{ screening.client.first_name }} {{ screening.client.last_name }} {{screening.client.grandfather_name}}
                              </td>
                              <td md-cell>{{screening.client.gender}}</td>
                              <td md-cell>{{screening.client.date_of_birth | date}}</td>
                              <td md-cell>{{screening.client.civil_status}}</td>
                              <td md-cell>{{screening.client.status | ReplaceUnderscore}}</td>
                              <td md-cell>
                                 <a ng-click="vm.screeningDetail(screening,$event)">
                                    <i class="fa fa-eye"></i>
                                 </a>
                              </td>
                           </tr>
                        </tbody>
                  </table>
               </md-table-container>

               <md-table-pagination md-limit="vm.query.per_page" md-limit-options="vm.pageSizes" md-page="vm.query.page" md-total="{{vm.query.total_docs_count}}" md-page-select="vm.options.pageSelect" md-boundary-links="vm.options.boundaryLinks" md-on-paginate="vm.paginate"></md-table-pagination>

            </div>
         </div>
      </uib-tab>
      <uib-tab ng-click="vm.onTabSelected('LOAN_APPLICATION')" heading="Loan Applications">
         <div class="row" ng-show="!vm.visibility.showLoanApplicationDetail">
            <div class="col-lg-12">

               <md-toolbar class="md-table-toolbar md-default" ng-show="vm.filter.show">
                  <div class="md-toolbar-tools">
                     <md-button class="md-icon-button" ng-click="vm.search('LOAN_APPLICATION')">
                        <i class="fa fa-search"></i>
                     </md-button>

                     <!-- Input Text -->
                     <md-input-container flex>
                        <input id="search-input-loan-application" type="text" ng-model="vm.query.search" />
                     </md-input-container>

                     <md-button class="md-icon-button" ng-click="vm.clearSearchText()">
                        <i class="fa fa-times"></i>
                     </md-button>
                  </div>
               </md-toolbar>

               <md-toolbar class="md-table-toolbar md-default" ng-hide="vm.filter.show">
                  <div class="md-toolbar-tools">
                     <h2 class="md-title">Clients under loan application</h2>

                     <div flex="" class="flex"></div>
                     <button class="md-icon-button md-button md-ink-ripple" type="button" ng-click="vm.filter.show = true">
                        <i class="fa fa-filter"></i>
                        <div class="md-ripple-container"></div>
                     </button>
                  </div>
               </md-toolbar>


               <md-table-container>
                  <table md-table md-progress="vm.loanApplicationPromise" class="table-hover">
                     <thead md-head class="text-gray-dark">
                        <tr md-row>
                           <th md-column>
                              <span>No</span>
                           </th>
                           <th md-column>
                              <span>Full Name</span>
                           </th>
                           <th md-column>
                              <span>Gender</span>
                           </th>
                           <th md-column>
                              <span>DOB</span>
                           </th>
                           <th md-column>
                              <span>Civil Status</span>
                           </th>
                           <th md-column>
                              <span>Status</span>
                           </th>
                           <th md-column>Action</th>
                        </tr>

                        <tbody md-body>
                           <tr md-row ng-repeat="loanApplication in vm.loan_applications">

                              <td md-cell>{{vm.query.per_page* (vm.query.page - 1) + $index + 1}}</td>
                              <td md-cell>
                                 {{ loanApplication.client.first_name }} {{ loanApplication.client.last_name }} {{loanApplication.client.grandfather_name}}
                              </td>
                              <td md-cell>{{loanApplication.client.gender}}</td>
                              <td md-cell>{{loanApplication.client.date_of_birth | date}}</td>
                              <td md-cell>{{loanApplication.client.civil_status}}</td>
                              <td md-cell>{{loanApplication.client.status | ReplaceUnderscore}}</td>
                              <td md-cell>
                                 <a ng-click="vm.loanApplicationDetail(loanApplication,$event)">
                                    <i class="fa fa-eye"></i>
                                 </a>
                              </td>
                           </tr>
                        </tbody>
                  </table>
               </md-table-container>

               <md-table-pagination md-limit="vm.query.per_page" md-limit-options="vm.pageSizes" md-page="vm.query.page" md-total="{{vm.query.total_docs_count}}" md-page-select="vm.options.pageSelect" md-boundary-links="vm.options.boundaryLinks" md-on-paginate="vm.paginate"></md-table-pagination>

            </div>
         </div>
      </uib-tab>
      <uib-tab ng-click="vm.onTabSelected('ACAT_PROCESSOR')" heading="ACAT">
         <div class="row">
            <div ng-if="vm.visibility.showACATDetail" class="col-lg-12">
               <acat-processor></acat-processor>
            </div>
         </div>
      </uib-tab>
   </uib-tabset>
</div>